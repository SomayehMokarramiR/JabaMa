

        db = [{id:1,type:"آپارتمان",city:"تهران",state:"تهران",opacity:"،4 نفر",view:93,price:680000,priceOff:" 36789 تومان",star:2.5,resv_immediate:"0",numRoom:2 ,mizban:"مرتضی مرتضوی",pic:["1.jpg","2.jpg","3.jpg","4.jpg","5.jpg"],dateLogin:14000304,dateLogout:14000314,number:2},
            {id:2,type:"مسافرخانه",city:"شیراز",state:"فارس",opacity:"،2 نفر",view:50,price:57900 ,priceOff:" 356789 تومان",star:3,resv_immediate:"0",numRoom:5 ,mizban:" لیلا گلی",pic:["4.jpg","2.jpg","3.jpg","1.jpg","5.jpg"],dateLogin:14020304,dateLogout:14020314,number:4},
            {id:3,type:"آپارتمان",city:"تهران",state:"تهران",opacity:"،5 نفر",view:33,price: 674 ,priceOff:" 356789 تومان",star:4,resv_immediate:"0",numRoom:3,mizban:"شیرین رضایی",pic:["5.jfif","6.jfif","7.jfif","8.jfif","9.jfif"],dateLogin:14020404,dateLogout:14020414,number:3},
            {id:4,type:"مجتمع اقامتی",city:"نوشهر",state:"مازندران",opacity:"7 نفر",view:12,price:1634624634 ,priceOff:" 356789 تومان",star:2,resv_immediate:"0",numRoom:6,mizban:"عباس عباسی",pic:["5.jpg","2.jpg","3.jpg","4.jpg","1.jpg"],dateLogin:14020210,dateLogout:14020214,number:2},
            {id:5,type:"سوییت",city:"تهران",state:"مازندران",opacity:"،4 نفر",view:106,price:9888 ,star:2,priceOff:" 423789 تومان",resv_immediate:"0",numRoom:2,mizban:"عباس فرحی",pic:["2.jpg","1.jpg","3.jpg","4.jpg","5.jpg"],dateLogin:14020112,dateLogout:14000114,number:3},
            {id:6,type:"هاستل",city:"قائمشهر",state:"مازندران",opacity:"،3 نفر",view:78,price: 456789 ,priceOff:" 423489 تومان",star:5,resv_immediate:"0",numRoom:7,mizban:"علی رضایی",pic:["3.jpg","8.jpg","2.jpg","4.jpg","5.jpg"],dateLogin:14020206,dateLogout:14020214,number:3},
            {id:7,type:"ویلایی",city:"رشت",state:"گیلان",opacity:"،1 نفر",view:47,price: 34567890 ,priceOff:" 451235 تومان",star:2.5,resv_immediate:"0",numRoom:3,mizban:"کاظم رضایی",pic:["8.jpg","2.jpg","3.jpg","4.jpg","5.jpg"],dateLogin:14010504,dateLogout:14010514,number:5,specialfeatures:{value:["بارببیکیو","استخر آب سرد","استخر آب گرم"," استخر سر پوشیده","خدمات اینترنتی","میز بیلیارد","سونا", "سیستم تهویه هوا"]}},
            {id:8,type:"کلبه",city:"اصفهان",state:"اصفهان",opacity:"،4 نفر",view:90,price:987000 ,priceOff:" 3456789 تومان",star:3.5,resv_immediate:"0",numRoom:4,mizban:"اکبر اکبری",pic:["4.jpg","2.jpg","3.jpg","4.jpg","5.jpg"],dateLogin:14020601,dateLogout:14020610,number:2,specialfeatures:{value:["بارببیکیو","استخر آب سرد","استخر آب گرم"," استخر سر پوشیده","خدمات اینترنتی","میز بیلیارد","سونا", "سیستم تهویه هوا"]}},
            {id:9,type:"بوم گردی",city:"،تهران",state:"تهران",opacity:"،6 نفر",view:25,price:456000 ,priceOff:" 2354789 تومان",star:1,resv_immediate:"0",numRoom:6 ,mizban:"اصغر اصغری",pic:["7.jfif","2.jpg","3.jpg","4.jpg","5.jpg"],dateLogin:14010204,dateLogout:14010214,number:3,specialfeatures:{value:["بارببیکیو","استخر آب سرد","استخر آب گرم"," استخر سر پوشیده","خدمات اینترنتی","میز بیلیارد","سونا", "سیستم تهویه هوا"]}},
            {id:10,type:"سنتی",city:"اردبیل",state:"اردبیل",opacity:"،3 نفر",view:88,price:34567 ,priceOff:" 234789 تومان",star:4.5,resv_immediate:"0",numRoom:9 ,mizban:"شهلا مرتضوی",pic:["6.jfif","5.jfif","7.jfif","8.jfif","9.jfif"],dateLogin:14021104,dateLogout:14021114,number:7,specialfeatures:{value:["بارببیکیو","استخر آب سرد","استخر آب گرم"," استخر سر پوشیده","خدمات اینترنتی","میز بیلیارد","سونا", "سیستم تهویه هوا"]}},
            {id:11,type:"آپارتمان",city:"یاسوج",state:"کهگیلویه و بویراحمد",opacity:"،2 نفر",view:22,priceOff:" 23489 تومان",price:89760,star:1.5,resv_immediate:"0",numRoom:1,mizban:"فرشید فرشیدی",pic:["1.jpg","2.jpg","3.jpg","4.jpg","5.jpg"],dateLogin:14010704,dateLogout:14010714,number:6,specialfeatures:{value:["بارببیکیو","استخر آب سرد","استخر آب گرم"," استخر سر پوشیده","خدمات اینترنتی","میز بیلیارد","سونا", "سیستم تهویه هوا"]}},
            {id:12,type:"آپارتمان",city:"تهران",state:"تهران",opacity:"،4 نفر",view:93,price: 680000,priceOff:" 36789 تومان",star:2.5,resv_immediate:"0",numRoom:2,mizban:"بهنام مومنی",pic:["4.jpg","2.jpg","3.jpg","1.jpg","5.jpg"],dateLogin:14000304,dateLogout:14000314,number:2},
            {id:13,type:"مسافرخانه",city:"شیراز",state:"فارس",opacity:"،2 نفر",view:50,price:57900 ,priceOff:" 356789 تومان",star:3,resv_immediate:"0",numRoom:5,mizban:"منا میلادی",pic:["1.jpg","2.jpg","3.jpg","4.jpg","5.jpg"],dateLogin:14020304,dateLogout:14020314,number:4},
            {id:14,type:"آپارتمان",city:"تهران",state:"تهران",opacity:"،5 نفر",view:33,price: 674 ,priceOff:" 356789 تومان",star:4,resv_immediate:"0",numRoom:3,mizban:"علی فرزین",pic:["5.jfif","6.jfif","7.jfif","8.jfif","9.jfif"],dateLogin:14020404,dateLogout:14020414,number:3},
            {id:15,type:"مجتمع اقامتی",city:"نوشهر",state:"مازندران",opacity:"7 نفر",view:12,price:1634624634 ,priceOff:" 356789 تومان",star:2,resv_immediate:"0",numRoom:6,mizban:" جفری",pic:["8.jfif","2.jpg","3.jpg","4.jpg","5.jpg"],dateLogin:14020210,dateLogout:14020214,number:2},
            {id:16,type:"سوییت",city:"تهران",state:"مازندران",opacity:"،4 نفر",view:106,price:9888 ,star:2,priceOff:" 423789 تومان",resv_immediate:"0",numRoom:2,mizban:"کریم اورجینال ",pic:["1.jpg","2.jpg","3.jpg","4.jpg","5.jpg"],dateLogin:14020112,dateLogout:14000114,number:3},
            {id:17,type:"هاستل",city:"قائمشهر",state:"مازندران",opacity:"،3 نفر",view:78,price: 456789 ,priceOff:" 423489 تومان",star:5,resv_immediate:"0",numRoom:5,mizban:"رضا کرمی",pic:["2.jpg","8.jpg","3.jpg","4.jpg","5.jpg"],dateLogin:14020206,dateLogout:14020214,number:8},
            {id:18,type:"ویلایی",city:"رشت",state:"گیلان",opacity:"،1 نفر",view:47,price: 34567890 ,priceOff:" 451235 تومان",star:2.5,resv_immediate:"0",numRoom:3,mizban:"الهه رضایی",pic:["9.jfif","2.jpg","3.jpg","4.jpg","5.jpg"],dateLogin:14010504,dateLogout:14010514,number:5},
            {id:19,type:"کلبه",city:"اصفهان",state:"اصفهان",opacity:"،4 نفر",view:90,price:987000 ,priceOff:" 3456789 تومان",star:3.5,resv_immediate:"0",numRoom:4,mizban:" فرشته نجفی",pic:["5.jfif","6.jfif","7.jfif","8.jfif","9.jfif"],dateLogin:14020601,dateLogout:14020610,number:2},
            {id:20,type:"بوم گردی",city:"،تهران",state:"تهران",opacity:"،6 نفر",view:25,price:456000 ,priceOff:" 2354789 تومان",star:1,resv_immediate:"0",numRoom:6,mizban:"رحمان رحیمی",pic:["10.jfif","2.jpg","3.jpg","4.jpg","5.jpg"],dateLogin:14010204,dateLogout:14010214,number:4},
            {id:21,type:"سنتی",city:"اردبیل",state:"اردبیل",opacity:"،3 نفر",view:88,price:34567 ,priceOff:" 234789 تومان",star:4.5,resv_immediate:"0",numRoom:9,mizban:"فرزاد مصیب",pic:["11.jfif","8.jpg","5.jfif","4.jpg","5.jpg"],dateLogin:14021104,dateLogout:14021114,number:2},
            {id:22,type:"آپارتمان",city:"یاسوج",state:"کهگیلویه و بویراحمد",opacity:"،2 نفر",view:22,priceOff:" 23489 تومان",price:89760,star:1.5,resv_immediate:"0",numRoom:1,mizban:"علی علوی",pic:["12.jfif","2.jpg","3.jpg","4.jpg","5.jpg"],dateLogin:14010704,dateLogout:14010714,number:9}]


    
        /* ======   Create_Itemes And Fill_galary ======== */ 

        function createItemes(database){
                it = document.createElement("div");
                it.className = "items";

             // it.addEventListener("click",function(){showModalItems()})
                it.addEventListener("click",function(){showModalNew(database.id)})
               
    
                 im = document.createElement("img");
                 im.src="img/image/all_images/" + database.pic[0];
          
        
            //   favDiv = document.createElement("div");
            //   favDiv.className = "fav";

            //     favim = document.createElement("img");
            //     favim.src="img/image/header/heartAftersearch.JPG";
            //     favim.className = "favImg";

            //     favDiv.appendChild(favim);

                // favDiv.addEventListener("click",function(){Addfavorite(database.id)})

                 desc= document.createElement("div");
                 desc.className = "describe";
    
                     st= document.createElement("span");
                     st.className = "star";
                     st.style.width = 18*database.star + "px";	
    
                     view= document.createElement("span");
                     view.className = "view";
                     view.innerHTML = "(" +  database.view + " دیدگاه " +")";	
    
                     de= document.createElement("span");
                     de.className = "desc";
                     de.innerHTML = database.type;	
    
    
                     loc= document.createElement("span");
                     loc.className = "location";
                     loc.innerHTML = database.state +"، "+ database.city  +"، ";		
    
                    room= document.createElement("span");
                     room.className = "room";
                     room.innerHTML = database.numRoom + "  اتاق ";	
    
                     num= document.createElement("span");
                     num.className = "number";
                     num.innerHTML = database.number + "نفر";	
                    
                     priOff= document.createElement("div");
                     priOff.className = "priceOffer";
    
                         pri= document.createElement("span");
                         pri.className = "Price2";
                         pri.innerHTML = "شروع قیمت از :";	
    
                         pric= document.createElement("span");
                         pric.className = "price";
                         pric.innerHTML = database.price + "تومان";
    
                         spp= document.createElement("span");
                         spp.className = "spp";
                         spp.innerHTML = "/هر شب";
    
                     priOff.appendChild(pri);
                     priOff.appendChild(pric);
                     priOff.appendChild(spp);
    
                     res= document.createElement("span");
                     res.className = "Reservation";
    
                         im1=document.createElement("img");
                         im1.src="img/image/header/Reservation.JPG";
    
                         para=document.createElement("p");
                         para.className="res";
                         para.innerHTML = "رزرو آنی و قطعی";	
    
                     res.appendChild(im1);
                     res.appendChild(para);
    
                 desc.appendChild(st);
                 desc.appendChild(view);
                 desc.appendChild(de);
                 desc.appendChild(loc);
                 desc.appendChild(room);
                 desc.appendChild(num);
                 desc.appendChild(priOff);
                 desc.appendChild(res);
             it.appendChild(im);
             it.appendChild(desc);
            //  it.appendChild(favDiv);

             galary1.appendChild(it);
             

        }

         function fill_galary(jsonData){
            jsonData.map(item => createItemes(item))
            console.log(jsonData)
         }

         
         fill_galary(db);  

  // ===================================

function filterData(){

    galary1.innerHTML="";

    allCat=true;
    let type1 = "";
    let type2 = "";
    let type3 = "";
    let type4 = "";
    let type5 = "";
    let type6 = "";
    let type7 = "";
    let type8 = "";
     
    if(type1ch.checked){
        type1="آپارتمان";
        allCat=false;
    }
    if(type2ch.checked){
        type2="مسافرخانه";
        allCat=false;
    }
    if(type3ch.checked){
        type3="مجتمع اقامتی";
        allCat=false;
    }
    if(type4ch.checked){
        type4="سوییت";
        allCat=false;
    }
    if(type5ch.checked){
        type5="سنتی";
        allCat=false;
    }
    if(type6ch.checked){
        type6="هاستل";
        allCat=false;
    }
    if(type7ch.checked){
        type7="ویلایی";
        allCat=false;
    }
    if(type8ch.checked){
        type8="کلبه";
        allCat=false;
    }

        var filtered = db.filter(function (el){
            return (  
                (el.type.indexOf(searchInp.value) !=-1 )&&              
                (el.price>=priFrom.value )&& 
                (el.price<= priTo.value)  &&
                (el.type==type1 || el.type==type2 ||el.type==type3 ||el.type==type4 ||el.type==type5 ||el.type==type6 ||el.type==type7 ||el.type==type8 || allCat)&&
                (el.number <= passengerNumber.innerHTML)
            )
            });
            // Sort
            if(starSort.checked){
            filtered = filtered.sort((a,b) => {return b.star - a.star});
           }
            if(priceSort.checked){
                filtered = filtered.sort(function(a,b){return a.price - b.price});
            }
            
        fill_galary(filtered);

    }

    priFrom.oninput = function () {
        priFromOut.innerHTML = priFrom.value;
        

      };
    priTo.oninput = function () {
        priToOut.innerHTML = priTo.value;
        
      };
    searchInp.onkeyup = filterData;

    btnEdit.onclick = function(){
        filterData();
    }

    btnEditPrice.onclick = function(){
        filterData();
    }     
    plusNumber.onclick = function (){
        passengerNumber.innerHTML++;
        
        
    }
    minusNumber.onclick = function (){
        passengerNumber.innerHTML--;  
    }
    

    btnEditNumber.onclick = function(){
        filterData();
    }
//=============================================

// addFavBtn.addEventListener("click",function(){Addfavorite(database.id)})
//================================================
        

      /* let btnSearch = document.getElementById("btnSearch")
        btnSearch.addEventListener("click",function(){
                alert("kjhjs")
                let state = db.find(el => el.state == inputState.value);
                let datelogin = db.find(el => el.dateLogin == inputLogin.value);
                let dateLogout = db.find(el => el.dateLogout == inputLogout.value);
                let number = db.find(el => el.number == inputNumber.value);
        
    
                let  stateSeach= JSON.parse(localStorage.setAttribute("stateSeach",state));
                let  dateloginSeach= JSON.parse(localStorage.setAttribute("dateloginSeach",datelogin));
                let  dateLogoutSeach=JSON.parse(localStorage.setAttribute("dateLogoutSeach",dateLogout));
                let  numberSeach= JSON.parse(localStorage.setAttribute("numberSeach",number));


              let  getState= JSON.parse(localStorage.getAttribute("stateSeach"));
                alert("getState");
                let  getDatelogine= JSON.parse(localStorage.getAttribute("dateloginSeach"));
                let  getDateLogout= JSON.parse(localStorage.getAttribute("dateLogoutSeach"));
                let  getNumber= JSON.parse(localStorage.getAttribute("numberSeach"));

            if(getState || getDatelogine || getDateLogout || getNumber){
                    stateSeach.push(state);
                    dateloginSeach.push(datelogin);
                    dateLogoutSeach.push(dateLogout);
                    numberSeach.push(number);
                }

            })*/
       /* let btnSearch = document.getElementById("btnSearch")
        btnSearch.addEventListener("click",function(){
                alert("kjhjs")
                let state = db.find(el => el.state == inputState.value);
                let datelogin = db.find(el => el.dateLogin == inputLogin.value);
                let dateLogout = db.find(el => el.dateLogout == inputLogout.value);
                let number = db.find(el => el.number == inputNumber.value);
        
                let dataSearch = JSON.parse(localStorage.setAttribute("dataSearch"));  

                dataSearch.push({state,datelogin,dateLogout,number});
         
                localStorage.setItem("dataSearch",JSON.stringify(dataSearch));
                pageOne.className="hide";
                mainpageId.className ="show";
            })*/